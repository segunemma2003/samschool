import{c as A,r as i,t as Rt,a as Mt,j as e,V as Pe,R as _e,A as Oe,C as De,X as $e,T as qe,D as Le,b as ze,P as Pt,z as _t,d as Ot,e as He,f as Dt,y as me,S as $t,h as Qe,k as qt,u as Lt,l as te,i as zt,m as Ht,s as Ve,p as Ye,Q as Qt,q as Vt,v as Yt,H as Ft,w as Wt,x as K}from"./client-BFsy8bn8.js";import{R as Fe,u as Ut,A as We}from"./index-73IKM1MG.js";/* empty css            *//* empty css              *//**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ce=A("ArrowRight",Jt);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]],Bt=A("CameraOff",Xt);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Z=A("Camera",Gt);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ue=A("Check",Kt);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Je=A("Clock",Zt);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ts=A("Eye",es);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],rs=A("House",ss);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Te=A("ListChecks",as);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],os=A("LogOut",ns);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],cs=A("Moon",is);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ds=A("RefreshCw",ls);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 9h.01",key:"x1ddxp"}]],le=A("ScanFace",ms);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],xs=A("Shield",us);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],fs=A("Sun",hs);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gs=A("TriangleAlert",ps);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],bs=A("Trophy",vs),ws=1,js=1e6;let pe=0;function ys(){return pe=(pe+1)%Number.MAX_SAFE_INTEGER,pe.toString()}const ge=new Map,Ie=t=>{if(ge.has(t))return;const s=setTimeout(()=>{ge.delete(t),ee({type:"REMOVE_TOAST",toastId:t})},js);ge.set(t,s)},Ns=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,ws)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?Ie(r):t.toasts.forEach(a=>{Ie(a.id)}),{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},oe=[];let ie={toasts:[]};function ee(t){ie=Ns(ie,t),oe.forEach(s=>{s(ie)})}function H({...t}){const s=ys(),r=n=>ee({type:"UPDATE_TOAST",toast:{...n,id:s}}),a=()=>ee({type:"DISMISS_TOAST",toastId:s});return ee({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:n=>{n||a()}}}),{id:s,dismiss:a,update:r}}function Ss(){const[t,s]=i.useState(ie);return i.useEffect(()=>(oe.push(s),()=>{const r=oe.indexOf(s);r>-1&&oe.splice(r,1)}),[t]),{...t,toast:H,dismiss:r=>ee({type:"DISMISS_TOAST",toastId:r})}}function T(...t){return Rt(Mt(t))}const Es=Pt,Xe=i.forwardRef(({className:t,...s},r)=>e.jsx(Pe,{ref:r,className:T("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));Xe.displayName=Pe.displayName;const Ts=ze("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Be=i.forwardRef(({className:t,variant:s,...r},a)=>e.jsx(_e,{ref:a,className:T(Ts({variant:s}),t),...r}));Be.displayName=_e.displayName;const Is=i.forwardRef(({className:t,...s},r)=>e.jsx(Oe,{ref:r,className:T("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));Is.displayName=Oe.displayName;const Ge=i.forwardRef(({className:t,...s},r)=>e.jsx(De,{ref:r,className:T("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx($e,{className:"h-4 w-4"})}));Ge.displayName=De.displayName;const Ke=i.forwardRef(({className:t,...s},r)=>e.jsx(qe,{ref:r,className:T("text-sm font-semibold",t),...s}));Ke.displayName=qe.displayName;const Ze=i.forwardRef(({className:t,...s},r)=>e.jsx(Le,{ref:r,className:T("text-sm opacity-90",t),...s}));Ze.displayName=Le.displayName;function ks(){const{toasts:t}=Ss();return e.jsxs(Es,{children:[t.map(function({id:s,title:r,description:a,action:n,...o}){return e.jsxs(Be,{...o,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(Ke,{children:r}),a&&e.jsx(Ze,{children:a})]}),n,e.jsx(Ge,{})]},s)}),e.jsx(Xe,{})]})}const As=({...t})=>{const{theme:s="system"}=_t();return e.jsx(Ot,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},Cs=Dt,Rs=i.forwardRef(({className:t,sideOffset:s=4,...r},a)=>e.jsx(He,{ref:a,sideOffset:s,className:T("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));Rs.displayName=He.displayName;const ae={title:"Web Development Fundamentals",timeLimit:45,passingScore:70,questions:[{id:1,text:"What does HTML stand for?",options:[{id:"a",text:"Hyper Text Markup Language"},{id:"b",text:"Hyper Transfer Markup Language"},{id:"c",text:"Hyper Text Makeup Language"},{id:"d",text:"Hyper Transfer Makeup Language"}],correctOptionId:"a"},{id:2,text:"Which of the following is a CSS preprocessor?",options:[{id:"a",text:"jQuery"},{id:"b",text:"SASS"},{id:"c",text:"TypeScript"},{id:"d",text:"Node.js"}],correctOptionId:"b"},{id:3,text:"Which JavaScript method is used to access an HTML element by its ID?",options:[{id:"a",text:"querySelector()"},{id:"b",text:"getElementsByClassName()"},{id:"c",text:"getElementById()"},{id:"d",text:"getElementByName()"}],correctOptionId:"c"},{id:4,text:"What is the correct way to declare a variable in JavaScript that cannot be reassigned?",options:[{id:"a",text:"var x = 5;"},{id:"b",text:"let x = 5;"},{id:"c",text:"const x = 5;"},{id:"d",text:"static x = 5;"}],correctOptionId:"c"},{id:5,text:"Which HTTP method is used to update a resource?",options:[{id:"a",text:"GET"},{id:"b",text:"POST"},{id:"c",text:"PUT"},{id:"d",text:"DELETE"}],correctOptionId:"c"},{id:6,text:"What does API stand for?",options:[{id:"a",text:"Application Programming Interface"},{id:"b",text:"Application Process Integration"},{id:"c",text:"Advanced Programming Interface"},{id:"d",text:"Application Protocol Interface"}],correctOptionId:"a"},{id:7,text:"Which of the following is NOT a JavaScript framework or library?",options:[{id:"a",text:"React"},{id:"b",text:"Angular"},{id:"c",text:"Django"},{id:"d",text:"Vue"}],correctOptionId:"c"},{id:8,text:"What is the purpose of the 'viewport' meta tag in HTML?",options:[{id:"a",text:"To enhance SEO for the website"},{id:"b",text:"To control the layout on mobile browsers"},{id:"c",text:"To specify the character encoding for the HTML document"},{id:"d",text:"To define the default programming language for the website"}],correctOptionId:"b"},{id:9,text:"Which of the following is used to persist data in a web browser even after the browser is closed?",options:[{id:"a",text:"Cookies"},{id:"b",text:"Session Storage"},{id:"c",text:"Local Storage"},{id:"d",text:"Cache Storage"}],correctOptionId:"c"},{id:10,text:"What does the acronym 'SPA' stand for in web development?",options:[{id:"a",text:"Server Page Application"},{id:"b",text:"Single Page Application"},{id:"c",text:"Static Page Application"},{id:"d",text:"Server Process Application"}],correctOptionId:"b"}]},ke={id:"user-123",name:"John Doe",email:"john.doe@example.com",examId:"WD-FUND-2023",profileImage:"https://randomuser.me/api/portraits/men/32.jpg"},h={EXAM:"cbt-exam-state",TIMER:"cbt-exam-timer",EXAM_DATA:"exam",STUDENT:"student",QUESTIONS:"questions",ANSWERS:"answers",ACADEMY:"academy",TERM:"term",HAS_VIEWED_RESULTS:"has-viewed-results",THEME:"cbt-theme",ATTEMPTS:"cbt-exam-attempts"},G=(t,s,r)=>!s||!r?t:`${t}-${s}-${r}`,k=(t,s=null,r=null,a=null)=>{try{const n=G(t,r,a),o=localStorage.getItem(n);return o?JSON.parse(o):s}catch(n){return console.error(`Error loading ${t} from localStorage:`,n),s}},M=(t,s,r=null,a=null)=>{try{const n=G(t,r,a);return localStorage.setItem(n,JSON.stringify(s)),!0}catch(n){return console.error(`Error saving ${t} to localStorage:`,n),!1}},et=(t,s=null,r=null)=>{try{return t.forEach(a=>{const n=G(a,s,r);localStorage.removeItem(n)}),!0}catch(a){return console.error("Error clearing localStorage:",a),!1}},Ms=(t=null,s=null)=>{const r=[h.EXAM,h.TIMER,h.ANSWERS,h.HAS_VIEWED_RESULTS];return et(r,t,s)},Ps=()=>{const t=[h.EXAM,h.TIMER,h.ANSWERS,h.EXAM_DATA,h.STUDENT,h.QUESTIONS,h.ACADEMY,h.TERM,"course","quizScore",h.HAS_VIEWED_RESULTS];return et(t)},_s=t=>M(h.THEME,t),Os=()=>k(h.THEME,"light"),Ds=(t,s)=>{if(!t||!s)return!1;const r=G(h.ATTEMPTS,t,s),n=k(r,0)+1;return M(r,n),n},$s=(t,s)=>{if(!t||!s)return 0;const r=G(h.ATTEMPTS,t,s);return k(r,0)},qs=(t,s)=>{if(!t||!s)return!1;const r=G(h.ATTEMPTS,t,s);return M(r,0)},Ls=t=>{if(!t||typeof t.timeRemaining!="number"||typeof t.timestamp!="number")return null;const s=Math.floor((Date.now()-t.timestamp)/1e3);return Math.max(0,t.timeRemaining-s)},ve=(t,s,r)=>{const a={timeRemaining:t,timestamp:Date.now()};M(h.TIMER,a,s,r)},zs=()=>window.dataRefreshNeeded===!0,ne=t=>t?t*60:3600,Hs=t=>Array.isArray(t)?t.map(s=>{let r="";const a=Object.entries(s.options||{}).map(([n,o])=>{if(Array.isArray(o)&&o.length>0){const l=o[0];return l.is_correct&&(r=n),{id:n,text:l.option||l.text||"",image:l.image||null,is_correct:l.is_correct||!1}}else if(typeof o=="object"&&o!==null)return o.is_correct&&(r=n),{id:n,text:o.text||o.option||o.toString(),image:o.image||null,is_correct:o.is_correct||!1};return{id:n,text:o,is_correct:!1}});return!r&&s.answer&&(r=s.answer),{id:s.id,text:s.question,type:s.question_type,image:s.image,options:a,correctOptionId:r}}):[],Qs=(t,s,r,a)=>{var o,l,m;const n=Hs(s);return{id:t.id,title:((l=(o=t.subject)==null?void 0:o.subject_depot)==null?void 0:l.name)||"Exam",timeLimit:t.duration?t.duration:60,passingScore:((m=t.subject)==null?void 0:m.pass_mark)||60,questions:n,instructions:t.instructions,term:r,academy:a}},Ae=t=>Array.isArray(t)?t.map(s=>({questionId:s.question_id||s.questionId,selectedOptionId:s.answer||s.selectedOptionId})):[],Vs=(t,s)=>{let r=0;const a=(s==null?void 0:s.length)||0;return t.forEach(o=>{const l=s==null?void 0:s.find(m=>m.id===o.questionId);l&&l.correctOptionId===o.selectedOptionId&&r++}),{score:a>0?Math.round(r/a*100):0,totalQuestions:a,correctAnswers:r}},Ys=(t,s)=>t.map(r=>{const a=s==null?void 0:s.find(l=>l.id===r.questionId),n=a&&a.correctOptionId===r.selectedOptionId,o=(a==null?void 0:a.score)??1;return{question_id:r.questionId,answer:r.selectedOptionId||null,score:n?o:0,correct:n,comments:r.comments||""}}),Fs=async(t,s,r,a,n)=>{if(!t||!s)return console.error("Missing exam or user data for API submission"),Promise.reject("Missing exam or user data");const o=window.location.origin;let l=null;try{const c=localStorage.getItem("course");c&&(l=JSON.parse(c))}catch(c){console.error("Error parsing course data:",c)}const m={exam_id:t.id,student_id:s.id,course_form_id:(l==null?void 0:l.id)||null,recording_path:a?"uploads/exam_recordings/exam1.mp4":null,total_score:n,answers:Ys(r,t.questions)};console.log("Submitting exam data to API:",m);try{const c=await fetch(`${o}/api/save-exam-data`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(m)});if(!c.ok){let f="Failed to save exam data";try{f=(await c.json()).message||f}catch{f=c.statusText||f}throw new Error(f)}const u=await c.json();return console.log("Exam data saved successfully:",u),u}catch(c){throw console.error("Error saving exam data:",c.message),c}},tt=i.createContext(void 0),Ws=({children:t})=>{const s=me(),[r,a]=i.useState(null),[n,o]=i.useState(null),[l,m]=i.useState(0),[c,u]=i.useState([]),[f,g]=i.useState(0),[x,N]=i.useState(!1),[I,C]=i.useState(null),[b,w]=i.useState(!1),[$,_]=i.useState(!1),[q,Ne]=i.useState(!1),[se,F]=i.useState(!1),[re,ue]=i.useState(!1),[U,J]=i.useState(0),[R,W]=i.useState(1),L=i.useRef(null),X=i.useRef(!0),V=i.useRef(!1),S=i.useCallback(()=>{const d=k(h.STUDENT,null);return(d==null?void 0:d.id)||null},[]),E=i.useCallback(()=>{const d=k(h.EXAM_DATA,null);return(d==null?void 0:d.id)||null},[]),B=i.useCallback(()=>{try{const d=k(h.STUDENT,null);d?(console.log("Loaded student data:",d),o(d)):o(ke);const p=k(h.EXAM_DATA,null),j=k(h.QUESTIONS,null),y=k(h.TERM,null),z=k(h.ACADEMY,null),v=d==null?void 0:d.id,D=p==null?void 0:p.id;if(p&&j){console.log("Loaded exam data:",p),console.log("Loaded questions data:",j);const he=Qs(p,j,y,z);if(a(he),W(p.maxAttempts||1),v&&D){const O=$s(v,D);J(O)}const Ct=k(h.TIMER,null,v,D),Ee=k(h.EXAM,null,v,D);if(X.current=!Ct||!Ee||!Ee.examStartedAt,!V.current)if(X.current){const O=ne(p.duration);console.log("Setting initial time for new attempt:",O,"seconds"),g(O)}else console.log("Page reload detected, using saved timer state");const fe=k(h.ANSWERS,[],v,D);if(fe&&fe.length){console.log("Found previous answers in localStorage with namespace");const O=Ae(fe);u(O),console.log("Loaded previous answers from localStorage:",O)}else if(window.answers){console.log("Found previous answers in window.answers");try{if(Array.isArray(window.answers)){const O=Ae(window.answers);u(O),console.log("Loaded previous answers from window.answers:",O),M(h.ANSWERS,window.answers,v,D)}}catch(O){console.error("Error processing window.answers:",O)}}else console.log("No previous answers found")}else console.log("Using mock exam data"),a(ae),g(ae.timeLimit*60);return!0}catch(d){return console.error("Error loading exam data:",d),a(ae),o(ke),g(ae.timeLimit*60),!1}},[]);i.useEffect(()=>{const d=S(),p=E();k(h.HAS_VIEWED_RESULTS,!1,d,p)===!0&&w(!0)},[S,E]),i.useEffect(()=>{S(),E(),!b||U<R?B():(H({title:"Exam Already Completed",description:"You have already completed this exam and cannot retake it.",variant:"warning"}),s("/results"))},[b,s,B,U,R,S,E]),i.useEffect(()=>{const d=()=>{const p=S(),j=E(),y=k(h.EXAM,null,p,j),z=k(h.TIMER,null,p,j);if(y)try{m(y.currentQuestionIndex||0),!c.length&&y.answers&&y.answers.length&&u(y.answers),N(y.isExamComplete||!1),C(y.examStartedAt||null)}catch(v){console.error("Error parsing saved exam state:",v)}if(z&&!V.current)try{const v=Ls(z);v!==null&&(console.log("Restoring timer:",{saved:z.timeRemaining,new:v}),g(v),V.current=!0,v<=0&&!x&&(N(!0),s("/summary"),H({title:"Time's up!",description:"Your exam has been automatically submitted.",variant:"destructive"})))}catch(v){console.error("Error parsing saved timer:",v)}};(!b||U<R)&&d()},[s,c.length,b,U,R,S,E]);const bt=i.useCallback(()=>(console.log("Forcing reload of exam data"),B()),[B]);i.useEffect(()=>{if(I){const d=S(),p=E(),j={currentQuestionIndex:l,answers:c,isExamComplete:x,examStartedAt:I};M(h.EXAM,j,d,p),M(h.ANSWERS,c,d,p)}},[l,c,x,I,S,E]),i.useEffect(()=>{if(I&&!x&&f>0&&!b){console.log("Starting timer with",f,"seconds remaining");const d=S(),p=E();return ve(f,d,p),L.current=window.setInterval(()=>{g(j=>{const y=j-1;return ve(y,d,p),y<=0?(L.current&&clearInterval(L.current),N(!0),s("/summary"),H({title:"Time's up!",description:"Your exam has been automatically submitted.",variant:"destructive"}),0):y})},1e3),()=>{L.current&&clearInterval(L.current)}}return()=>{L.current&&clearInterval(L.current)}},[I,x,f,s,b,S,E]);const wt=()=>{var z;const d=S(),p=E();if(U>=R&&(H({title:"Maximum Attempts Reached",description:`You have already used all ${R} attempts for this exam.`,variant:"warning"}),s("/results")),b&&(H({title:"Exam Already Completed",description:"You have already completed this exam and cannot retake it.",variant:"warning"}),s("/results")),re&&(!q||!se)){H({title:"Camera Verification Required",description:"Please enable your camera and verify your face before starting the exam.",variant:"destructive"});return}if(d&&p){const v=Ds(d,p);J(v)}const j=Date.now();if(C(j),!V.current&&r){const v=ne(r.timeLimit);console.log("Setting initial time to",v,"seconds"),g(v)}else console.log("Continuing with existing time of",f,"seconds");if(m(0),N(!1),c.length===0&&(r!=null&&r.questions)){const v=r.questions.map(D=>({questionId:D.id,selectedOptionId:null}));u(v)}const y={currentQuestionIndex:0,answers:c.length&&(r!=null&&r.questions)?c:((z=r==null?void 0:r.questions)==null?void 0:z.map(v=>({questionId:v.id,selectedOptionId:null})))||[],isExamComplete:!1,examStartedAt:j};if(M(h.EXAM,y,d,p),M(h.ANSWERS,c.length?c:[],d,p),!V.current&&r){const v={timeRemaining:ne(r.timeLimit),timestamp:j};M(h.TIMER,v,d,p),V.current=!0}else ve(f,d,p);s("/exam")},jt=async()=>{const d=S(),p=E();if(x&&!b)try{await xe()}catch(j){console.error("Error saving exam data during reset:",j)}Ms(d,p),m(0),u([]),r&&g(ne(r.timeLimit)),N(!1),C(null),w(!1),V.current=!1,s("/")},yt=()=>{const d=S(),p=E();d&&p&&(qs(d,p),J(0),H({title:"Attempts Reset",description:"Your exam attempts have been reset. You can now take the exam again."}))},Nt=d=>{r!=null&&r.questions&&d>=0&&d<r.questions.length&&m(d)},St=()=>{r!=null&&r.questions&&l<r.questions.length-1?m(d=>d+1):s("/summary")},Et=()=>{l>0&&m(d=>d-1)},Tt=(d,p)=>{const j=S(),y=E();u(z=>{const v=[...z],D=v.findIndex(he=>he.questionId===d);return D>=0?v[D]={questionId:d,selectedOptionId:p}:v.push({questionId:d,selectedOptionId:p}),M(h.ANSWERS,v,j,y),v})},It=async()=>{_(!0);try{await xe(),N(!0),L.current&&clearInterval(L.current);const d=S(),p=E(),j={currentQuestionIndex:l,answers:c,isExamComplete:!0,examStartedAt:I};M(h.EXAM,j,d,p),M(h.ANSWERS,c,d,p),s("/results")}catch(d){console.error("Error saving exam results:",d),H({title:"Error Saving Results",description:"There was a problem saving your exam results. Please try again.",variant:"destructive"}),N(!0),s("/results")}finally{_(!1)}},Se=()=>Vs(c,r==null?void 0:r.questions),kt=()=>{const d=!q;Ne(d),d||F(!1)},xe=async()=>{if(!r||!n)return console.error("Missing exam or user data for API submission"),Promise.reject("Missing exam or user data");const{score:d}=Se(),p=S(),j=E();try{const y=await Fs(r,n,c,q,d);return M(h.HAS_VIEWED_RESULTS,!0,p,j),w(!0),y}catch(y){throw console.error("Error saving exam data:",y.message),y}},At={exam:r,userData:n,currentQuestionIndex:l,answers:c,timeRemaining:f,isExamComplete:x,examStartedAt:I,startExam:wt,goToQuestion:Nt,goToNextQuestion:St,goToPreviousQuestion:Et,saveAnswer:Tt,completeExam:It,calculateScore:Se,resetExam:jt,saveExamData:xe,isCameraActive:q,toggleCamera:kt,isCameraVerified:se,setIsCameraVerified:F,isCameraRequired:re,setIsCameraRequired:ue,hasViewedResults:b,isSavingResults:$,reloadExamData:bt,attempts:U,maxAttempts:R,setMaxAttempts:W,resetExamAttempts:yt,isNewAttempt:X.current};return e.jsx(tt.Provider,{value:At,children:t})},Y=()=>{const t=i.useContext(tt);if(t===void 0)throw new Error("useExam must be used within an ExamProvider");return t},Us=ze("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),P=i.forwardRef(({className:t,variant:s,size:r,asChild:a=!1,...n},o)=>{const l=a?$t:"button";return e.jsx(l,{className:T(Us({variant:s,size:r,className:t})),ref:o,...n})});P.displayName="Button";const Q=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:T("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));Q.displayName="Card";const Js=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:T("flex flex-col space-y-1.5 p-6",t),...s}));Js.displayName="CardHeader";const Xs=i.forwardRef(({className:t,...s},r)=>e.jsx("h3",{ref:r,className:T("text-2xl font-semibold leading-none tracking-tight",t),...s}));Xs.displayName="CardTitle";const Bs=i.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:T("text-sm text-muted-foreground",t),...s}));Bs.displayName="CardDescription";const Gs=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:T("p-6 pt-0",t),...s}));Gs.displayName="CardContent";const Ks=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:T("flex items-center p-6 pt-0",t),...s}));Ks.displayName="CardFooter";const be=i.forwardRef(({className:t,orientation:s="horizontal",decorative:r=!0,...a},n)=>e.jsx(Fe,{ref:n,decorative:r,orientation:s,className:T("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...a}));be.displayName=Fe.displayName;const st=({isActive:t,onToggle:s,onFaceDetected:r,verificationMode:a=!1})=>{const n=i.useRef(null),o=i.useRef(null),[l,m]=i.useState(!1),[c,u]=i.useState(!1),[f,g]=i.useState(!1),x=i.useRef(null);i.useEffect(()=>(t?N():(I(),g(!1),r&&r(!1)),()=>{I(),x.current&&(window.clearInterval(x.current),x.current=null)}),[t,r]);const N=async()=>{m(!0),u(!1),g(!1);try{const b=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:!1});o.current=b,n.current&&(n.current.srcObject=b,a&&(n.current.onloadedmetadata=()=>{C()}))}catch(b){console.error("Error accessing camera:",b),u(!0),H({title:"Camera Error",description:"Unable to access your camera. Please check your permissions.",variant:"destructive"})}finally{m(!1)}},I=()=>{x.current&&(window.clearInterval(x.current),x.current=null),o.current&&(o.current.getTracks().forEach(b=>b.stop()),o.current=null),n.current&&(n.current.srcObject=null)},C=async()=>{try{const b=()=>{if(!n.current||!o.current)return;const w=document.createElement("canvas"),$=w.getContext("2d");if(!$)return;w.width=n.current.videoWidth,w.height=n.current.videoHeight,$.drawImage(n.current,0,0,w.width,w.height);const q=$.getImageData(0,0,w.width,w.height).data;let Ne=0;const se=1e3,F=[];for(let R=0;R<se;R++){const W=Math.floor(w.width*.25+Math.random()*w.width*.5),X=(Math.floor(w.height*.25+Math.random()*w.height*.5)*w.width+W)*4,V=q[X],S=q[X+1],E=q[X+2],B=(V+S+E)/3;F.push(B)}const re=F.reduce((R,W)=>R+W,0)/F.length,ue=F.reduce((R,W)=>R+Math.pow(W-re,2),0)/F.length,J=Math.sqrt(ue)>25;J!==f&&(g(J),r&&r(J))};x.current=window.setInterval(b,500)}catch(b){console.error("Error during face detection:",b)}};return e.jsxs("div",{className:"glass-panel overflow-hidden flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[e.jsx("h3",{className:"text-sm font-semibold",children:a?"Camera Verification":"Exam Proctoring"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:s,className:"text-xs",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-3.5 w-3.5 mr-1"}),"Disable"]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-3.5 w-3.5 mr-1"}),"Enable"]})})]}),e.jsx("div",{className:"flex-1 relative bg-black/5 dark:bg-black/20 flex items-center justify-center",children:t?e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:`w-full h-full object-cover ${l?"opacity-0":"opacity-100 transition-opacity duration-500"}`}),l&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 rounded-full border-2 border-primary/30 border-t-primary animate-spin"})}),c&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(Z,{className:"h-8 w-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Unable to access camera. Please check your browser permissions."})]}),a&&f&&e.jsxs("div",{className:"absolute top-2 right-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs flex items-center",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Face Detected"]}),a&&t&&!f&&!l&&!c&&e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg p-4 text-center max-w-xs",children:[e.jsx(le,{className:"h-8 w-8 mx-auto text-primary mb-2"}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"Position your face in frame"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make sure your face is clearly visible and well-lit"})]})})]}):e.jsxs("div",{className:"text-center p-6",children:[e.jsx(Z,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Camera is disabled. ",a?"Enable it to verify your identity.":"Enable it for exam proctoring."]})]})})]})};var we="Switch",[Zs,Mr]=Qe(we),[er,tr]=Zs(we),rt=i.forwardRef((t,s)=>{const{__scopeSwitch:r,name:a,checked:n,defaultChecked:o,required:l,disabled:m,value:c="on",onCheckedChange:u,form:f,...g}=t,[x,N]=i.useState(null),I=qt(s,_=>N(_)),C=i.useRef(!1),b=x?f||!!x.closest("form"):!0,[w=!1,$]=Lt({prop:n,defaultProp:o,onChange:u});return e.jsxs(er,{scope:r,checked:w,disabled:m,children:[e.jsx(te.button,{type:"button",role:"switch","aria-checked":w,"aria-required":l,"data-state":ot(w),"data-disabled":m?"":void 0,disabled:m,value:c,...g,ref:I,onClick:zt(t.onClick,_=>{$(q=>!q),b&&(C.current=_.isPropagationStopped(),C.current||_.stopPropagation())})}),b&&e.jsx(sr,{control:x,bubbles:!C.current,name:a,value:c,checked:w,required:l,disabled:m,form:f,style:{transform:"translateX(-100%)"}})]})});rt.displayName=we;var at="SwitchThumb",nt=i.forwardRef((t,s)=>{const{__scopeSwitch:r,...a}=t,n=tr(at,r);return e.jsx(te.span,{"data-state":ot(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:s})});nt.displayName=at;var sr=t=>{const{control:s,checked:r,bubbles:a=!0,...n}=t,o=i.useRef(null),l=Ut(r),m=Ht(s);return i.useEffect(()=>{const c=o.current,u=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(u,"checked").set;if(l!==r&&g){const x=new Event("click",{bubbles:a});g.call(c,r),c.dispatchEvent(x)}},[l,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:o,style:{...t.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ot(t){return t?"checked":"unchecked"}var it=rt,rr=nt;const ct=i.forwardRef(({className:t,...s},r)=>e.jsx(it,{className:T("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:r,children:e.jsx(rr,{className:T("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ct.displayName=it.displayName;const lt=i.createContext(void 0),ar=({children:t})=>{const[s,r]=i.useState("light");i.useEffect(()=>{const l=Os();r(l),a(l)},[]);const a=l=>{l==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},o={theme:s,toggleTheme:()=>{const l=s==="light"?"dark":"light";r(l),_s(l),a(l)},isDark:s==="dark"};return e.jsx(lt.Provider,{value:o,children:t})},dt=()=>{const t=i.useContext(lt);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},nr=()=>{const{theme:t,toggleTheme:s}=dt();return e.jsx(P,{variant:"ghost",size:"icon",onClick:s,className:"rounded-full w-9 h-9","aria-label":"Toggle theme",children:t==="light"?e.jsx(cs,{className:"h-5 w-5"}):e.jsx(fs,{className:"h-5 w-5"})})},or=()=>{var $;const{exam:t,startExam:s,isCameraActive:r,toggleCamera:a,timeRemaining:n,isCameraVerified:o,setIsCameraVerified:l,setIsCameraRequired:m,reloadExamData:c,attempts:u,maxAttempts:f,resetExamAttempts:g}=Y();dt();const[x,N]=Ve.useState(!1);i.useEffect(()=>{zs()&&(console.log("Data refresh needed, reloading exam data"),window.dataRefreshNeeded=!1),c()},[c]);const I=_=>{l(_)},C=()=>{const _=!x;N(_),m(_)},b=Math.max(0,f-u),w=b>0;return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-muted/30 p-6",children:[e.jsx("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:e.jsx(nr,{})}),e.jsxs("div",{className:"w-full max-w-4xl animate-fade-in",children:[e.jsxs("div",{className:"glass-panel p-8 md:p-10",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center h-12 w-12 rounded-full bg-primary/10 text-primary mb-4",children:e.jsx(Te,{className:"h-6 w-6"})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-semibold tracking-tight mb-2",children:(t==null?void 0:t.title)||"Loading exam..."}),e.jsx("p",{className:"text-muted-foreground max-w-xl",children:"Welcome to your online examination. Please read the instructions carefully before proceeding."})]}),e.jsx(be,{className:"mb-8"}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[e.jsxs(Q,{className:"p-4 flex flex-col items-center text-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 text-primary flex items-center justify-center mb-3",children:e.jsx(Je,{className:"h-5 w-5"})}),e.jsx("h3",{className:"font-medium mb-1",children:"Time Limit"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(t==null?void 0:t.timeLimit)||"--"," minutes"]})]}),e.jsxs(Q,{className:"p-4 flex flex-col items-center text-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 text-primary flex items-center justify-center mb-3",children:e.jsx(Te,{className:"h-5 w-5"})}),e.jsx("h3",{className:"font-medium mb-1",children:"Questions"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(($=t==null?void 0:t.questions)==null?void 0:$.length)||"--"," multiple choice"]})]}),e.jsxs(Q,{className:"p-4 flex flex-col items-center text-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 text-primary flex items-center justify-center mb-3",children:e.jsx(xs,{className:"h-5 w-5"})}),e.jsx("h3",{className:"font-medium mb-1",children:"Passing Score"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(t==null?void 0:t.passingScore)||"--","% or higher"]})]}),e.jsxs(Q,{className:"p-4 flex flex-col items-center text-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 text-primary flex items-center justify-center mb-3",children:e.jsx(ds,{className:"h-5 w-5"})}),e.jsx("h3",{className:"font-medium mb-1",children:"Attempts"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[b," of ",f," remaining"]})]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-8",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Instructions:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{children:["• You have ",n/60||"--"," minutes to complete the exam."]}),e.jsx("li",{children:"• All questions are multiple choice with only one correct answer."}),e.jsx("li",{children:"• You can navigate between questions using the navigation buttons."}),e.jsx("li",{children:"• Your answers are saved automatically; you can revisit questions."}),e.jsx("li",{children:"• The camera feature is optional for proctoring purposes."}),e.jsx("li",{children:"• If you refresh the page, your progress and time will be preserved."}),e.jsxs("li",{children:["• You have ",f," attempt(s) for this exam, and you've used ",u,"."]}),e.jsx("li",{children:`• Click "Start Exam" when you're ready to begin.`})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ts,{className:"h-5 w-5 mr-2 text-primary"}),e.jsx("span",{className:"font-medium",children:"Enable Camera Proctoring"})]}),e.jsx(ct,{checked:x,onCheckedChange:C,"aria-label":"Toggle camera requirement"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[e.jsx("div",{children:e.jsxs(Q,{className:`h-full flex flex-col ${x?"":"opacity-50"}`,children:[e.jsxs("div",{className:"p-4 border-b border-border",children:[e.jsx("h3",{className:"font-medium",children:"Camera Verification"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x?"Please enable your camera and position your face in the frame":"Camera verification is disabled"})]}),e.jsx("div",{className:"flex-1 p-4",children:e.jsx("div",{className:"h-[300px]",children:e.jsx(st,{isActive:r&&x,onToggle:x?a:null,onFaceDetected:I,verificationMode:!0,disabled:!x})})}),e.jsxs("div",{className:"p-4 bg-muted/30 border-t border-border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[r&&x?e.jsx(Z,{className:"h-4 w-4 text-primary mr-2"}):e.jsx(Z,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Camera"})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs ${r&&x?"bg-green-500/10 text-green-500":"bg-muted text-muted-foreground"}`,children:x&&r?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center",children:[o&&x?e.jsx(le,{className:"h-4 w-4 text-primary mr-2"}):e.jsx(le,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Face Detection"})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs ${o&&x?"bg-green-500/10 text-green-500":"bg-muted text-muted-foreground"}`,children:x?o?"Verified":"Not Detected":"Disabled"})]})]})]})}),e.jsx("div",{children:e.jsxs(Q,{className:"h-full p-6 flex flex-col justify-center items-center text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center h-16 w-16 rounded-full bg-primary/10 text-primary mb-4",children:e.jsx(ce,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"Ready to Begin?"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:w?x?"Once you enable your camera and verify your face, you can start the exam.":"You can start the exam immediately since camera verification is disabled.":"You have used all your attempts for this exam."})]}),w?e.jsx(P,{onClick:s,size:"lg",className:"w-full",disabled:x&&(!r||!o),children:x&&!r?"Enable Camera First":x&&!o?"Position Your Face":e.jsxs(e.Fragment,{children:["Start Exam",e.jsx(ce,{className:"ml-2 h-4 w-4"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-amber-500 dark:text-amber-400 font-medium",children:["You have used all ",f," attempts for this exam."]}),e.jsx(P,{onClick:g,variant:"outline",className:"w-full",children:"Reset Attempts"})]}),x&&!r&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"You must enable your camera before starting"}),x&&r&&!o&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Position your face clearly in the frame"})]})})]})]}),e.jsxs("div",{className:"mt-4 text-center text-xs text-muted-foreground",children:["© ",new Date().getFullYear()," CBT Examination System. All rights reserved."]})]})]})},ir=({userData:t})=>{const{exam:s,resetExam:r}=Y(),a=()=>{window.confirm("Are you sure you want to exit this exam? Your progress will be saved.")&&r()};return e.jsxs("div",{className:"glass-panel h-full flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsx("h3",{className:"text-sm font-semibold",children:"Candidate Information"})}),e.jsxs("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[t.profileImage?e.jsx("div",{className:"h-16 w-16 rounded-full overflow-hidden bg-secondary flex-shrink-0 border border-border",children:e.jsx("img",{src:t.profileImage,alt:t.name,className:"h-full w-full object-cover"})}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-secondary flex items-center justify-center flex-shrink-0 border border-border",children:e.jsx("span",{className:"text-xl font-semibold text-muted-foreground",children:t.name.charAt(0)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-foreground truncate",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t.email})]})]}),e.jsx(be,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Exam ID"}),e.jsx("p",{className:"text-sm font-mono",children:t.examId})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Exam Title"}),e.jsx("p",{className:"text-sm",children:s.title})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Duration"}),e.jsxs("p",{className:"text-sm",children:[s.timeLimit," minutes"]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Total Questions"}),e.jsx("p",{className:"text-sm",children:s.questions.length})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Passing Score"}),e.jsxs("p",{className:"text-sm",children:[s.passingScore,"%"]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Class"}),e.jsx("p",{className:"text-sm",children:t.class.name})]})]})]}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsxs(P,{variant:"outline",className:"w-full text-xs",onClick:a,children:[e.jsx(os,{className:"h-3.5 w-3.5 mr-1.5"}),"Exit Exam"]})})]})};var cr="AspectRatio",mt=i.forwardRef((t,s)=>{const{ratio:r=1/1,style:a,...n}=t;return e.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/r}%`},"data-radix-aspect-ratio-wrapper":"",children:e.jsx(te.div,{...n,ref:s,style:{...a,position:"absolute",top:0,right:0,bottom:0,left:0}})})});mt.displayName=cr;var lr=mt;const Ce=lr,dr=({question:t,questionNumber:s,totalQuestions:r})=>{const{saveAnswer:a,answers:n,goToNextQuestion:o,goToPreviousQuestion:l}=Y(),m=n.find(u=>u.questionId===t.id),c=u=>{a(t.id,u)};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("div",{children:e.jsxs("span",{className:"inline-block px-2.5 py-1 bg-secondary rounded-md text-xs font-medium",children:["Question ",s," of ",r]})})}),e.jsxs(Q,{className:"p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:t.text}),t.image&&e.jsx("div",{className:"mb-6",children:e.jsx(Ce,{ratio:16/9,className:"bg-muted rounded-md overflow-hidden",children:e.jsx("img",{src:"https://schoolcompasse.s3.us-east-1.amazonaws.com/"+t.image,alt:"Question illustration",className:"w-full h-full object-contain",onError:u=>{console.error("Failed to load question image"),u.target.style.display="none"}})})}),e.jsx("div",{className:"space-y-3",children:t.options.map(u=>e.jsxs("div",{className:`question-option ${(m==null?void 0:m.selectedOptionId)===u.id?"question-option-selected":""}`,onClick:()=>c(u.id),children:[e.jsx("div",{className:"mr-3 h-5 w-5 rounded-full border border-border flex items-center justify-center flex-shrink-0",children:(m==null?void 0:m.selectedOptionId)===u.id&&e.jsx("div",{className:"h-3 w-3 rounded-full bg-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{children:u.text}),u.image&&e.jsx("div",{className:"mt-2",children:e.jsx(Ce,{ratio:16/9,className:"bg-muted rounded-md overflow-hidden max-w-[300px]",children:e.jsx("img",{src:"https://schoolcompasse.s3.us-east-1.amazonaws.com/"+u.image,alt:`Option ${u.id}`,className:"w-full h-full object-contain",onError:f=>{console.error(`Failed to load image for option ${u.id}`),f.target.style.display="none"}})})})]})]},u.id))})]}),e.jsxs("div",{className:"flex justify-between pt-2",children:[e.jsxs(P,{variant:"outline",onClick:l,disabled:s===1,children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Previous"]}),e.jsxs(P,{onClick:o,children:[s===r?"Finish":"Next",e.jsx(ce,{className:"h-4 w-4 ml-2"})]})]})]})},mr=({className:t="",showTimer:s=!1})=>{const{exam:r,answers:a,timeRemaining:n}=Y(),o=a.filter(g=>g.selectedOptionId!==null).length,l=r.questions.length,m=Math.round(o/l*100),c=r.timeLimit*60,u=Math.round(n/c*100),f=u<=20?"bg-destructive":u<=50?"bg-orange-500":"bg-emerald-500";return e.jsxs("div",{className:`space-y-2 ${t}`,children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{className:"font-medium",children:[o,"/",l," questions answered"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-secondary rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${m}%`}})}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center text-xs mt-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Remaining"}),e.jsxs("span",{className:"font-medium",children:[Math.floor(n/60)," minutes"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-secondary rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${f} rounded-full transition-all duration-500 ease-out`,style:{width:`${u}%`}})})]})]})},ut=()=>{const{timeRemaining:t,isExamComplete:s}=Y(),[r,a]=i.useState(!1),[n,o]=i.useState(!1),l=c=>{const u=Math.floor(c/3600),f=Math.floor(c%3600/60),g=c%60;return u>0?`${u}:${f.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`:`${f.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`};i.useEffect(()=>{t<=300&&t>60?(a(!0),o(!1)):t<=60?(a(!1),o(!0)):(a(!1),o(!1))},[t]);const m=s?"bg-secondary text-muted-foreground":n?"bg-destructive/10 text-destructive animate-pulse":r?"bg-orange-500/10 text-orange-600 dark:text-orange-400":"bg-primary/10 text-primary";return e.jsxs("div",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium ${m}`,title:s?"Exam completed":`Time remaining: ${l(t)}`,children:[e.jsx(Je,{className:"h-3.5 w-3.5 mr-1.5"}),e.jsx("span",{className:"font-mono",children:l(t)})]})},ur=({onComplete:t})=>{const{exam:s,answers:r,currentQuestionIndex:a,goToQuestion:n,completeExam:o}=Y(),l=()=>{window.confirm("Are you sure you want to submit your exam?")&&(o(),t&&t())};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Question Navigator"}),e.jsx(P,{variant:"default",size:"sm",onClick:l,className:"text-xs",children:"Submit Exam"})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:s.questions.map((m,c)=>{const u=r.find(x=>x.questionId===m.id),f=u&&u.selectedOptionId!==null,g=c===a;return e.jsx(P,{variant:g?"default":"outline",className:`h-10 w-10 p-0 ${f&&!g?"bg-primary/10 border-primary/30":""}`,onClick:()=>n(c),children:c+1},m.id)})})]})},xr=({examId:t})=>{const s=me(),{exam:r,userData:a,currentQuestionIndex:n,examStartedAt:o,isCameraActive:l,toggleCamera:m,isCameraRequired:c,isExamComplete:u,saveExamData:f}=Y();i.useEffect(()=>{o||s("/")},[o,s]),i.useEffect(()=>{(async()=>{if(u)try{await f(),s("/results")}catch(N){console.error("Error saving exam data:",N),s("/results")}})()},[u,s,f]);const g=r!=null&&r.questions?r.questions[n]:null;return r?g?e.jsxs("div",{className:"min-h-screen bg-background overflow-hidden",children:[e.jsx("header",{className:"h-16 border-b border-border bg-background/80 backdrop-blur-sm sticky top-0 z-10",children:e.jsxs("div",{className:"container h-full flex items-center justify-between px-4",children:[e.jsx("h1",{className:"text-lg font-medium",children:r.title}),e.jsx(ut,{})]})}),e.jsx("main",{className:"container px-4 py-6",children:e.jsxs("div",{className:"grid lg:grid-cols-12 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsx("div",{className:"h-auto lg:h-[250px]",children:e.jsx(ir,{userData:a})}),c&&e.jsx("div",{className:"h-auto lg:h-[250px]",children:e.jsx(st,{isActive:l,onToggle:m})})]}),e.jsxs("div",{className:"lg:col-span-9",children:[e.jsx("div",{className:"mb-6",children:e.jsx(mr,{})}),e.jsx(dr,{question:g,questionNumber:n+1,totalQuestions:r.questions.length}),e.jsx("div",{className:"mt-6",children:e.jsx(ur,{})})]})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-medium mb-2",children:"Loading question..."}),e.jsx("div",{className:"h-2 w-40 bg-muted rounded-full overflow-hidden mx-auto",children:e.jsx("div",{className:"h-full bg-primary animate-pulse w-full"})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-medium mb-2",children:"Loading exam data..."}),e.jsx("div",{className:"h-2 w-40 bg-muted rounded-full overflow-hidden mx-auto",children:e.jsx("div",{className:"h-full bg-primary animate-pulse w-full"})})]})})},hr=()=>{const t=me(),{exam:s,answers:r,goToQuestion:a,completeExam:n,examStartedAt:o}=Y();i.useEffect(()=>{o||t("/")},[o,t]);const l=s.questions.length,m=r.filter(x=>x.selectedOptionId!==null).length,c=l-m,u=Math.round(m/l*100),f=x=>{a(x),t("/exam")},g=()=>{window.confirm("Are you sure you want to submit your exam? You cannot return once submitted.")&&n()};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"h-16 border-b border-border bg-background/80 backdrop-blur-sm sticky top-0 z-10",children:e.jsxs("div",{className:"container h-full flex items-center justify-between px-4",children:[e.jsx("h1",{className:"text-lg font-medium",children:"Exam Summary"}),e.jsx(ut,{})]})}),e.jsx("main",{className:"container px-4 py-8 max-w-5xl mx-auto",children:e.jsxs(Q,{className:"p-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Review Your Answers"}),e.jsxs("p",{className:"text-muted-foreground",children:["You have answered ",m," out of ",l," questions (",u,"% complete)."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border border-border",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 text-primary flex items-center justify-center mr-3",children:e.jsx(Ue,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Answered Questions"}),e.jsx("p",{className:"text-2xl font-semibold",children:m})]})]}),e.jsx("div",{className:"h-2 w-full bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${u}%`}})})]}),e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border border-border",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-500/10 text-orange-500 flex items-center justify-center mr-3",children:e.jsx(gs,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Unanswered Questions"}),e.jsx("p",{className:"text-2xl font-semibold",children:c})]})]}),e.jsx("div",{className:"h-2 w-full bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-orange-500 rounded-full transition-all duration-500 ease-out",style:{width:`${100-u}%`}})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Question Navigator"}),e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:s.questions.map((x,N)=>{const I=r.find(b=>b.questionId===x.id),C=I&&I.selectedOptionId!==null;return e.jsx(P,{variant:C?"default":"outline",onClick:()=>f(N),className:C?"":"border-orange-500/30 text-orange-500",children:N+1},x.id)})})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-8",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Before You Submit:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{children:["• You have ",c," unanswered questions."]}),e.jsx("li",{children:"• Once submitted, you cannot return to the exam."}),e.jsx("li",{children:"• Click on any question number above to go back and answer it."}),e.jsx("li",{children:"• Make sure you've reviewed all your answers before submitting."})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(P,{variant:"outline",onClick:()=>t("/exam"),children:[e.jsx(We,{className:"mr-2 h-4 w-4"}),"Return to Exam"]}),e.jsxs(P,{onClick:g,disabled:m===0,children:["Submit Exam",e.jsx(ce,{className:"ml-2 h-4 w-4"})]})]})]})})]})};var je="Progress",ye=100,[fr,Pr]=Qe(je),[pr,gr]=fr(je),xt=i.forwardRef((t,s)=>{const{__scopeProgress:r,value:a=null,max:n,getValueLabel:o=vr,...l}=t;(n||n===0)&&!Re(n)&&console.error(br(`${n}`,"Progress"));const m=Re(n)?n:ye;a!==null&&!Me(a,m)&&console.error(wr(`${a}`,"Progress"));const c=Me(a,m)?a:null,u=de(c)?o(c,m):void 0;return e.jsx(pr,{scope:r,value:c,max:m,children:e.jsx(te.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":de(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":pt(c,m),"data-value":c??void 0,"data-max":m,...l,ref:s})})});xt.displayName=je;var ht="ProgressIndicator",ft=i.forwardRef((t,s)=>{const{__scopeProgress:r,...a}=t,n=gr(ht,r);return e.jsx(te.div,{"data-state":pt(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...a,ref:s})});ft.displayName=ht;function vr(t,s){return`${Math.round(t/s*100)}%`}function pt(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function de(t){return typeof t=="number"}function Re(t){return de(t)&&!isNaN(t)&&t>0}function Me(t,s){return de(t)&&!isNaN(t)&&t<=s&&t>=0}function br(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${ye}\`.`}function wr(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${ye} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var gt=xt,jr=ft;const vt=i.forwardRef(({className:t,value:s,...r},a)=>e.jsx(gt,{ref:a,className:T("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:e.jsx(jr,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));vt.displayName=gt.displayName;const yr=()=>{const t=me(),{exam:s,isExamComplete:r,calculateScore:a,resetExam:n}=Y();i.useEffect(()=>{r||t("/")},[r,t]);const{score:o,totalQuestions:l,correctAnswers:m}=a(),c=o>=s.passingScore,u=()=>{n(),window.location.href="/student/exams"};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/30 px-4 py-12",children:e.jsx("div",{className:"container max-w-2xl mx-auto",children:e.jsxs(Q,{className:"p-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"inline-flex items-center justify-center h-20 w-20 rounded-full bg-primary/10 text-primary mb-4",children:e.jsx(bs,{className:"h-10 w-10"})}),e.jsx("h1",{className:"text-3xl font-semibold mb-2",children:"Exam Completed!"}),e.jsxs("p",{className:"text-muted-foreground",children:["You have completed the ",s.title," exam."]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mb-2 flex justify-between items-end",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Your Score"}),e.jsxs("span",{className:"text-3xl font-bold",children:[o,"%"]})]}),e.jsx(vt,{value:o,className:"h-4"}),e.jsxs("div",{className:"mt-1 flex justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:"0%"}),e.jsxs("span",{children:["Passing: ",s.passingScore,"%"]}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border border-border",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Total Questions"}),e.jsx("p",{className:"text-xl font-semibold",children:l})]}),e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border border-border",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Correct Answers"}),e.jsx("p",{className:"text-xl font-semibold",children:m})]})]}),e.jsx("div",{className:`p-4 rounded-lg border mb-8 ${c?"bg-green-500/10 border-green-500/30 text-green-700 dark:text-green-400":"bg-destructive/10 border-destructive/30 text-destructive"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center mr-3 ${c?"bg-green-500/20":"bg-destructive/20"}`,children:c?e.jsx(Ue,{className:"h-5 w-5"}):e.jsx($e,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:c?"Congratulations! You passed the exam.":"Unfortunately, you did not pass the exam."}),e.jsx("p",{className:"text-sm mt-1",children:c?`You achieved a score of ${o}%, which is above the required ${s.passingScore}% passing score.`:`You achieved a score of ${o}%, which is below the required ${s.passingScore}% passing score.`})]})]})}),e.jsxs("div",{className:"text-center",children:[e.jsxs(P,{onClick:u,size:"lg",className:"px-8",children:[e.jsx(rs,{className:"mr-2 h-4 w-4"}),"Return to Dashboard"]}),e.jsx("p",{className:"mt-4 text-xs text-muted-foreground",children:"Your results have been saved. You may close this page now."})]})]})})})},Nr=()=>{const t=Ye();return i.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Sr=new Qt,Er=()=>{Ps(),console.log(window.exam),window.student&&localStorage.setItem("student",JSON.stringify(window.student)),window.exam&&localStorage.setItem("exam",JSON.stringify(window.exam)),window.term&&localStorage.setItem("term",JSON.stringify(window.term)),window.academy&&localStorage.setItem("academy",JSON.stringify(window.academy)),window.course&&localStorage.setItem("course",JSON.stringify(window.course)),window.questions&&localStorage.setItem("questions",JSON.stringify(window.questions)),window.answers&&localStorage.setItem("answers",JSON.stringify(window.answers)),window.quizScore&&localStorage.setItem("quizScore",JSON.stringify(window.quizScore));const t=Ye();return i.useEffect(()=>{t.pathname==="/"&&(window.dataRefreshNeeded=!0)},[t]),null},Tr=()=>{const t=document.getElementById("quiz-root");return t?t.getAttribute("data-exam-id"):null},Ir=()=>(i.useEffect(()=>{console.log(window.exam),window.student&&localStorage.setItem("student",JSON.stringify(window.student)),window.exam&&localStorage.setItem("exam",JSON.stringify(window.exam)),window.term&&localStorage.setItem("term",JSON.stringify(window.term)),window.academy&&localStorage.setItem("academy",JSON.stringify(window.academy)),window.course&&localStorage.setItem("course",JSON.stringify(window.course)),window.questions&&localStorage.setItem("questions",JSON.stringify(window.questions)),window.answers&&localStorage.setItem("answers",JSON.stringify(window.answers)),window.quizScore&&localStorage.setItem("quizScore",JSON.stringify(window.quizScore))},[]),e.jsx(Yt,{client:Sr,children:e.jsx(ar,{children:e.jsxs(Cs,{children:[e.jsx(ks,{}),e.jsx(As,{}),e.jsx(Ft,{children:e.jsxs(Ws,{children:[e.jsx(Er,{}),e.jsxs(Wt,{children:[e.jsx(K,{path:"/",element:e.jsx(or,{})}),e.jsx(K,{path:"/exam",element:e.jsx(xr,{examId:Tr()})}),e.jsx(K,{path:"/summary",element:e.jsx(hr,{})}),e.jsx(K,{path:"/results",element:e.jsx(yr,{})}),e.jsx(K,{path:"*",element:e.jsx(Nr,{})})]})]})})]})})}));document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("quiz-root");t&&Vt.createRoot(t).render(e.jsx(Ve.StrictMode,{children:e.jsx(Ir,{})}))});
